function loadJS(A,e,t){var o=!!window.ActiveXObject,i=o&&!window.XMLHttpRequest,a=document.createElement("script"),r=i?document.documentElement:document.getElementsByTagName("head")[0];a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){"loaded"!=a.readyState&&"complete"!=a.readyState||(a.onreadystatechange=null,e&&e())}:a.onload=function(){e&&e()},a.src=A,t?document.getElementById(t).appendChild(a):r.insertBefore(a,r.firstChild)}$.fn.extend({isOnScreenVisible:function(){if(!$("body").hasClass("post-template"))return!1;var A=$(window),e={top:A.scrollTop(),left:A.scrollLeft()};e.right=e.left+A.width(),e.bottom=e.top+A.height();var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}});var duoshuoQuery={short_name:"luolei"},GlobalConfigue={masterDomain:"https://luolei.org"},General={isMobile:!1,isWechat:!1,viewWidth:$(window).width(),absUrl:location.protocol+"//"+location.host,init:function(){var A=window,e=(A.document,navigator.userAgent.toLowerCase()),t=A.navigator.appVersion.match(/android/gi);A.navigator.appVersion.match(/iphone/gi);"micromessenger"==e.match(/MicroMessenger/i)&&(General.isWechat=!0,$("body").addClass("wechat-webview")),t&&(General.isMobile=!0),$("body").hasClass("post-template")&&(General.updateImageWidth(),General.rewardLoader()),General.webFontLoader(),General.scrollToPos(),General.arrowEvent()},updateImageWidth:function(){function A(){var A=$(this),e=t.outerWidth(),o=this.naturalWidth;o>=e?A.addClass("full-img"):A.removeClass("full-img")}function e(){o.each(A)}var t=$(".post-content"),o=$(".single-post-inner img").on("load",A);e()},webFontLoader:function(){WebFontConfig={loading:function(){},custom:{families:["Exo","iconfont"],urls:[General.absUrl+"/assets/css/font.min.css"]}},loadJS(General.absUrl+"/assets/js/webfont.js",function(){WebFont.load({custom:{families:["Exo","iconfont"]}})})},arrowEvent:function(){$(".arrow_down").click(function(){return $("html,body").animate({scrollTop:$(window).height()-20},600,function(){window.location.hash="#"}),!1})},scrollToPos:function(A){var e="我要飞到最高",t=(A||$(window).height(),$('<a href="#" id="to-top" title="'+e+'"> <div class="to-top-wrap"></div></a>').appendTo("body"));$(window).scroll(function(){$(window).scrollTop()>$(window).height()?t.fadeIn(500):t.fadeOut(500)}),t.click(function(A){A.preventDefault(),$("html,body").animate({scrollTop:0},666,function(){window.location.hash="#"})})},urlIconlize:function(A){var e,t,o="iconfont",i={twitter:o+"-twitter",qzone:o+"-qzone",weibo:o+"-weibo",facebook:o+"-facebook",github:o+"-github",douban:o+"-douban",google:o+"-google",luolei:o+"-luolei",dribble:o+"-dribble",v2ex:o+"-v2ex",zhihu:o+"-zhihu",wikipedia:o+"-wikipedia",jianshu:o+"-jianshu",youku:o+"-youku",youtube:o+"-youtube"};for(var a in i)if("function"!=typeof i[a]){var r=a;A.indexOf(r)>=0&&(e=r,t=i[r])}return t},addIcons:function(){$(".single-post-inner  a:not(:has(img))").each(function(A){var e=$(this).attr("href"),t=document.createElement("a");t.href=e,_selfDomain=t.hostname,General.urlIconlize(_selfDomain),$(this).prepend('<i class="iconfont '+General.urlIconlize(_selfDomain)+'"></i>');var o=$(this).find("i").css("color"),i=$(this).css("color");$(this).hover(function(){$(this).css("color",o),$(this).addClass("animated pulse")},function(){$(this).css("color",i),$(this).removeClass("animated pulse")})})},rewardLoader:function(){var A={alipay:"/assets/images/qr-alipay-256.png",wechat:"/assets/images/qr-wechat-256.png"};General.isWechat&&$(".wechat-code b").html("长按上方二维码打赏作者"),$(".money-like .reward-button").hover(function(){$("img.wechat-img").attr("src",A.wechat),$("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeIn(),$(this).addClass("active")},function(){$(".money-code").fadeOut(),$(this).removeClass("active")},800),$(".money-like .reward-button").click(function(){$(this).hasClass("active")?($(this).find("img.wechat-img").attr("src",A.wechat),$(this).find("img.alipay-img").attr("src",A.alipay),$(".money-code").fadeOut(),$(this).removeClass("active")):($(".money-code").fadeIn(),$(this).addClass("active"))})},commentLoader:function(){if(!$("body").hasClass("post-template"))return!1;var A=GlobalConfigue.masterDomain+location.pathname;$(window).scroll(function(){if($(".author-image").isOnScreenVisible()&&!$(".author-image").hasClass("comment-loaded")){var e=document,t=e.createElement("script");t.src="https://luoleiorg.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),loadJS("https://luoleiorg.disqus.com/embed.js",function(){$(".author-image").addClass("comment-loaded"),DISQUS.reset({reload:!0,config:function(){this.page.identifier=A,this.page.url=A}})})}})}},ImageSmartLoader={isWebPSupported:!1,isImageCompressed:!1,init:function(){ImageSmartLoader.webPCheck()},isCompressedCheck:function(){},webPCheck:function(A,e){var t={demo:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAsAAAABBxAREYiI/gcAAABWUDggGAAAADABAJ0BKgEAAQABABwlpAADcAD+/gbQAA=="},o=new Image;o.onload=function(){o.width>0&&o.height>0;ImageSmartLoader.isWebPSupported=!0,ImageSmartLoader.webPLoader()},o.onerror=function(){ImageSmartLoader.isWebPSupported=!1,ImageSmartLoader.webPLoader()},o.src="data:image/webp;base64,"+t.demo},imgLoader:function(){},webPLoader:function(){if(1==ImageSmartLoader.isWebPSupported){if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!0,is_scale:!1})}else{if(768==General.viewWidth)return $(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:1500}),!1;General.viewWidth<768?$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!0,scale_width:750}):$(".lazy").lazyload({advanced_load:!0,data_attribute:"url",webP_load:!1,is_scale:!1})}}};$(document).ready(function(){var A=$(window);$.fn.lazyload=function(e){function t(){var A=0;i.each(function(){var e=$(this);if(!a.skip_invisible||e.is(":visible"))if($.abovethetop(this,a)||$.leftofbegin(this,a));else if($.belowthefold(this,a)||$.rightoffold(this,a)){if(++A>a.failure_limit)return!1}else e.trigger("appear"),A=0})}var o,i=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/gif;base64,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",advanced_load:!1,webP_load:!1,is_scale:!1,scale_width:750};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),$.extend(a,e)),o=void 0===a.container||a.container===window?A:$(a.container),0===a.event.indexOf("scroll")&&o.bind(a.event,function(){return t()}),this.each(function(){var A=this,e=$(A);A.loaded=!1,void 0!==e.attr("src")&&e.attr("src")!==!1||e.is("img")&&(e.attr("src",a.placeholder),e.addClass("loading")),e.one("appear",function(){if(!this.loaded){if(a.appear){var t=i.length;a.appear.call(A,t,a)}var o=e.attr("data-"+a.data_attribute);(o.indexOf("upaiyun")>-1||o.indexOf("file.is26.com")>-1)&&(1==a.advanced_load&&(o+="!"),1==a.is_scale&&(o+="/fw/"+a.scale_width),1==a.webP_load&&(o+="/format/webp")),$("<img />").bind("load",function(){e.hide(),e.is("img")?e.attr("src",o):e.css("background-image","url('"+o+"')"),e[a.effect](a.effect_speed),A.loaded=!0;var t=$.grep(i,function(A){return!A.loaded});if(i=$(t),a.load){var r=i.length;a.load.call(A,r,a)}e.removeClass("loading")}).attr("src",o)}}),0!==a.event.indexOf("scroll")&&e.bind(a.event,function(){A.loaded||e.trigger("appear")})}),A.bind("resize",function(){t()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&A.bind("pageshow",function(A){A.originalEvent&&A.originalEvent.persisted&&i.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){t()}),this},$.belowthefold=function(e,t){var o;return o=void 0===t.container||t.container===window?(window.innerHeight?window.innerHeight:A.height())+A.scrollTop():$(t.container).offset().top+$(t.container).height(),o<=$(e).offset().top-t.threshold},$.rightoffold=function(e,t){var o;return o=void 0===t.container||t.container===window?A.width()+A.scrollLeft():$(t.container).offset().left+$(t.container).width(),o<=$(e).offset().left-t.threshold},$.abovethetop=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollTop():$(t.container).offset().top,o>=$(e).offset().top+t.threshold+$(e).height()},$.leftofbegin=function(e,t){var o;return o=void 0===t.container||t.container===window?A.scrollLeft():$(t.container).offset().left,o>=$(e).offset().left+t.threshold+$(e).width()},$.inviewport=function(A,e){return!($.rightoffold(A,e)||$.leftofbegin(A,e)||$.belowthefold(A,e)||$.abovethetop(A,e))},$.extend($.expr[":"],{"below-the-fold":function(A){return $.belowthefold(A,{threshold:0})},"above-the-top":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-screen":function(A){return $.rightoffold(A,{threshold:0})},"left-of-screen":function(A){return!$.rightoffold(A,{threshold:0})},"in-viewport":function(A){return $.inviewport(A,{threshold:0})},"above-the-fold":function(A){return!$.belowthefold(A,{threshold:0})},"right-of-fold":function(A){return $.rightoffold(A,{threshold:0})},"left-of-fold":function(A){return!$.rightoffold(A,{threshold:0})}}),General.init(),ImageSmartLoader.init(),$("body").hasClass("post-template")&&(General.addIcons(),General.commentLoader())});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiXSwibmFtZXMiOlsibG9hZEpTIiwidXJsIiwiY2FsbGJhY2siLCJlbCIsImlzSUUiLCJ3aW5kb3ciLCJBY3RpdmVYT2JqZWN0IiwiaXNJRTYiLCJYTUxIdHRwUmVxdWVzdCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInR5cGUiLCJhc3luYyIsInJlYWR5U3RhdGUiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJvbmxvYWQiLCJzcmMiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIiQiLCJmbiIsImV4dGVuZCIsImlzT25TY3JlZW5WaXNpYmxlIiwiaGFzQ2xhc3MiLCJ3aW4iLCJ2aWV3cG9ydCIsInRvcCIsInNjcm9sbFRvcCIsImxlZnQiLCJzY3JvbGxMZWZ0IiwicmlnaHQiLCJ3aWR0aCIsImJvdHRvbSIsImhlaWdodCIsImJvdW5kcyIsInRoaXMiLCJvZmZzZXQiLCJvdXRlcldpZHRoIiwib3V0ZXJIZWlnaHQiLCJkdW9zaHVvUXVlcnkiLCJzaG9ydF9uYW1lIiwiR2xvYmFsQ29uZmlndWUiLCJtYXN0ZXJEb21haW4iLCJHZW5lcmFsIiwiaXNNb2JpbGUiLCJpc1dlY2hhdCIsInZpZXdXaWR0aCIsImFic1VybCIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJob3N0IiwiaW5pdCIsIlVBIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJpc0FuZHJvaWQiLCJhcHBWZXJzaW9uIiwibWF0Y2giLCJhZGRDbGFzcyIsInVwZGF0ZUltYWdlV2lkdGgiLCJyZXdhcmRMb2FkZXIiLCJ3ZWJGb250TG9hZGVyIiwic2Nyb2xsVG9Qb3MiLCJhcnJvd0V2ZW50IiwiJHRoaXMiLCJjb250ZW50V2lkdGgiLCIkcG9zdENvbnRlbnQiLCJpbWFnZVdpZHRoIiwibmF0dXJhbFdpZHRoIiwicmVtb3ZlQ2xhc3MiLCJjYXNwZXJGdWxsSW1nIiwiJGltZyIsImVhY2giLCJvbiIsIldlYkZvbnRDb25maWciLCJsb2FkaW5nIiwiY3VzdG9tIiwiZmFtaWxpZXMiLCJ1cmxzIiwiV2ViRm9udCIsImxvYWQiLCJjbGljayIsImFuaW1hdGUiLCJoYXNoIiwicG9zaXRpb24iLCJTVFJfVE9fVE9QIiwiYnV0dG9uIiwiYXBwZW5kVG8iLCJzY3JvbGwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiZSIsInByZXZlbnREZWZhdWx0IiwidXJsSWNvbmxpemUiLCJkb21haW4iLCJfb3V0cHV0IiwiaWNvbkZvbnRUYWciLCJpY29uTWFwIiwidHdpdHRlciIsInF6b25lIiwid2VpYm8iLCJmYWNlYm9vayIsImdpdGh1YiIsImRvdWJhbiIsImdvb2dsZSIsImx1b2xlaSIsImRyaWJibGUiLCJ2MmV4IiwiemhpaHUiLCJ3aWtpcGVkaWEiLCJqaWFuc2h1IiwieW91a3UiLCJ5b3V0dWJlIiwibmFtZSIsIk1hcEtleSIsImluZGV4T2YiLCJhZGRJY29ucyIsImkiLCJfc3JjIiwiYXR0ciIsInRtcCIsImhyZWYiLCJfc2VsZkRvbWFpbiIsImhvc3RuYW1lIiwicHJlcGVuZCIsIl9zZWxmQ29sb3IiLCJmaW5kIiwiY3NzIiwiX29yaWdpbmFsQ29sb3IiLCJob3ZlciIsImxvYWRRUiIsImFsaXBheSIsIndlY2hhdCIsImh0bWwiLCJjb21tZW50TG9hZGVyIiwiZGF0YVRocmVhZEtleSIsInBhdGhuYW1lIiwiZCIsInMiLCJzZXRBdHRyaWJ1dGUiLCJEYXRlIiwiRElTUVVTIiwicmVzZXQiLCJyZWxvYWQiLCJjb25maWciLCJwYWdlIiwiaWRlbnRpZmllciIsIkltYWdlU21hcnRMb2FkZXIiLCJpc1dlYlBTdXBwb3J0ZWQiLCJpc0ltYWdlQ29tcHJlc3NlZCIsIndlYlBDaGVjayIsImlzQ29tcHJlc3NlZENoZWNrIiwiZmVhdHVyZSIsIlRlc3RJbWFnZXMiLCJkZW1vIiwiaW1nIiwiSW1hZ2UiLCJ3ZWJQTG9hZGVyIiwib25lcnJvciIsImltZ0xvYWRlciIsImxhenlsb2FkIiwiYWR2YW5jZWRfbG9hZCIsImRhdGFfYXR0cmlidXRlIiwid2ViUF9sb2FkIiwiaXNfc2NhbGUiLCJzY2FsZV93aWR0aCIsInJlYWR5IiwiJHdpbmRvdyIsIm9wdGlvbnMiLCJ1cGRhdGUiLCJjb3VudGVyIiwiZWxlbWVudHMiLCJzZXR0aW5ncyIsInNraXBfaW52aXNpYmxlIiwiaXMiLCJhYm92ZXRoZXRvcCIsImxlZnRvZmJlZ2luIiwiYmVsb3d0aGVmb2xkIiwicmlnaHRvZmZvbGQiLCJmYWlsdXJlX2xpbWl0IiwidHJpZ2dlciIsIiRjb250YWluZXIiLCJ0aHJlc2hvbGQiLCJldmVudCIsImVmZmVjdCIsImNvbnRhaW5lciIsImFwcGVhciIsInBsYWNlaG9sZGVyIiwidW5kZWZpbmVkIiwiZmFpbHVyZWxpbWl0IiwiZWZmZWN0c3BlZWQiLCJlZmZlY3Rfc3BlZWQiLCJiaW5kIiwic2VsZiIsIiRzZWxmIiwibG9hZGVkIiwib25lIiwiZWxlbWVudHNfbGVmdCIsImxlbmd0aCIsImNhbGwiLCJ1cGRhdGVkVXJsIiwiaGlkZSIsInRlbXAiLCJncmVwIiwiZWxlbWVudCIsInRlc3QiLCJvcmlnaW5hbEV2ZW50IiwicGVyc2lzdGVkIiwiZm9sZCIsImlubmVySGVpZ2h0IiwiaW52aWV3cG9ydCIsImV4cHIiLCJiZWxvdy10aGUtZm9sZCIsImEiLCJhYm92ZS10aGUtdG9wIiwicmlnaHQtb2Ytc2NyZWVuIiwibGVmdC1vZi1zY3JlZW4iLCJpbi12aWV3cG9ydCIsImFib3ZlLXRoZS1mb2xkIiwicmlnaHQtb2YtZm9sZCIsImxlZnQtb2YtZm9sZCJdLCJtYXBwaW5ncyI6IkFBdUJBLFFBQVNBLFFBQU9DLEVBQUtDLEVBQVVDLEdBQzNCLEdBQUlDLEtBQVNDLE9BQU9DLGNBQ2hCQyxFQUFRSCxJQUFTQyxPQUFPRyxlQUN4QkMsRUFBU0MsU0FBU0MsY0FBYyxVQUNoQ0MsRUFBT0wsRUFBUUcsU0FBU0csZ0JBQWtCSCxTQUFTSSxxQkFBcUIsUUFBUSxFQUNwRkwsR0FBT00sS0FBTyxrQkFDZE4sRUFBT08sT0FBUSxFQUNYUCxFQUFPUSxXQUNQUixFQUFPUyxtQkFBcUIsV0FDQyxVQUFyQlQsRUFBT1EsWUFBK0MsWUFBckJSLEVBQU9RLGFBQ3hDUixFQUFPUyxtQkFBcUIsS0FDeEJoQixHQUNBQSxNQUtaTyxFQUFPVSxPQUFTLFdBQ1JqQixHQUNBQSxLQUlaTyxFQUFPVyxJQUFNbkIsRUFDVEUsRUFDQU8sU0FBU1csZUFBZWxCLEdBQUltQixZQUFZYixHQUV4Q0csRUFBS1csYUFBYWQsRUFBUUcsRUFBS1ksWUFsRHZDQyxFQUFFQyxHQUFHQyxRQUVEQyxrQkFBbUIsV0FDZixJQUFLSCxFQUFFLFFBQVFJLFNBQVMsaUJBQ3BCLE9BQU8sQ0FFWCxJQUFJQyxHQUFNTCxFQUFFcEIsUUFDUjBCLEdBQ0FDLElBQUtGLEVBQUlHLFlBQ1RDLEtBQU1KLEVBQUlLLGFBRWRKLEdBQVNLLE1BQVFMLEVBQVNHLEtBQU9KLEVBQUlPLFFBQ3JDTixFQUFTTyxPQUFTUCxFQUFTQyxJQUFNRixFQUFJUyxRQUVyQyxJQUFJQyxHQUFTQyxLQUFLQyxRQUlsQixPQUhBRixHQUFPSixNQUFRSSxFQUFPTixLQUFPTyxLQUFLRSxhQUNsQ0gsRUFBT0YsT0FBU0UsRUFBT1IsSUFBTVMsS0FBS0csZ0JBRXhCYixFQUFTSyxNQUFRSSxFQUFPTixNQUFRSCxFQUFTRyxLQUFPTSxFQUFPSixPQUFTTCxFQUFTTyxPQUFTRSxFQUFPUixLQUFPRCxFQUFTQyxJQUFNUSxFQUFPRixVQXlDeEksSUFBSU8sZUFDQUMsV0FBWSxVQUdaQyxnQkFDQUMsYUFBYyxzQkFJZEMsU0FDQUMsVUFBVSxFQUNWQyxVQUFVLEVBQ1ZDLFVBQVczQixFQUFFcEIsUUFBUWdDLFFBQ3JCZ0IsT0FBUUMsU0FBU0MsU0FBVyxLQUFPRCxTQUFTRSxLQUM1Q0MsS0FBTSxXQUNGLEdBQUkzQixHQUFNekIsT0FFTnFELEdBRE01QixFQUFJcEIsU0FDTGlELFVBQVVDLFVBQVVDLGVBQ3pCQyxFQUFZaEMsRUFBSTZCLFVBQVVJLFdBQVdDLE1BQU0sWUFDaENsQyxHQUFJNkIsVUFBVUksV0FBV0MsTUFBTSxXQUNYLG1CQUEvQk4sRUFBR00sTUFBTSxxQkFDVGYsUUFBUUUsVUFBVyxFQUNuQjFCLEVBQUUsUUFBUXdDLFNBQVMsbUJBRWpCSCxJQUNGYixRQUFRQyxVQUFXLEdBRW5CekIsRUFBRSxRQUFRSSxTQUFTLG1CQUNuQm9CLFFBQVFpQixtQkFDUmpCLFFBQVFrQixnQkFHWmxCLFFBQVFtQixnQkFDUm5CLFFBQVFvQixjQUNScEIsUUFBUXFCLGNBRVpKLGlCQUFrQixXQUdkLFFBQVNBLEtBQ0wsR0FBSUssR0FBUTlDLEVBQUVnQixNQUNWK0IsRUFBZUMsRUFBYTlCLGFBQzVCK0IsRUFBYWpDLEtBQUtrQyxZQUVsQkQsSUFBY0YsRUFDZEQsRUFBTU4sU0FBUyxZQUVmTSxFQUFNSyxZQUFZLFlBTTFCLFFBQVNDLEtBQ0xDLEVBQUtDLEtBQUtiLEdBakJkLEdBQUlPLEdBQWVoRCxFQUFFLGlCQWNqQnFELEVBQU9yRCxFQUFFLDBCQUEwQnVELEdBQUcsT0FBUWQsRUFNbERXLE1BRUpULGNBQWUsV0FDWGEsZUFDSUMsUUFBUyxhQUdUQyxRQUNJQyxVQUFXLE1BQU8sWUFDbEJDLE1BQU9wQyxRQUFRSSxPQUFTLDhCQUdoQ3JELE9BQU9pRCxRQUFRSSxPQUFTLHdCQUF5QixXQUM3Q2lDLFFBQVFDLE1BQ0pKLFFBQ0lDLFVBQVcsTUFBTyxrQkFRbENkLFdBQVksV0FDUjdDLEVBQUUsZUFBZStELE1BQU0sV0FNbkIsTUFMQS9ELEdBQUUsYUFBYWdFLFNBQ1h4RCxVQUFXUixFQUFFcEIsUUFBUWtDLFNBQVcsSUFDakMsSUFBSyxXQUNKbEMsT0FBT2lELFNBQVNvQyxLQUFPLE9BRXBCLEtBSWZyQixZQUFhLFNBQVNzQixHQUNsQixHQUFJQyxHQUFhLFNBRWJDLEdBRGNGLEdBQVlsRSxFQUFFcEIsUUFBUWtDLFNBQzNCZCxFQUFFLGtDQUFvQ21FLEVBQWEsMENBQTBDRSxTQUFTLFFBQ25IckUsR0FBRXBCLFFBQVEwRixPQUFPLFdBQ1R0RSxFQUFFcEIsUUFBUTRCLFlBQWNSLEVBQUVwQixRQUFRa0MsU0FDbENzRCxFQUFPRyxPQUFPLEtBRWRILEVBQU9JLFFBQVEsT0FJdkJKLEVBQU9MLE1BQU0sU0FBU1UsR0FDbEJBLEVBQUVDLGlCQUNGMUUsRUFBRSxhQUFhZ0UsU0FDWHhELFVBQVcsR0FDWixJQUFLLFdBQ0o1QixPQUFPaUQsU0FBU29DLEtBQU8sU0FLbkNVLFlBQWEsU0FBU25HLEdBQ2xCLEdBQUlvRyxHQUNBQyxFQUNBQyxFQUFjLFdBQ2RDLEdBQ0FDLFFBQVdGLEVBQWMsV0FDekJHLE1BQVNILEVBQWMsU0FDdkJJLE1BQVNKLEVBQWMsU0FDdkJLLFNBQVlMLEVBQWMsWUFDMUJNLE9BQVVOLEVBQWMsVUFDeEJPLE9BQVVQLEVBQWMsVUFDeEJRLE9BQVVSLEVBQWMsVUFDeEJTLE9BQVVULEVBQWMsVUFDeEJVLFFBQVdWLEVBQWMsV0FDekJXLEtBQVFYLEVBQWMsUUFDdEJZLE1BQVNaLEVBQWMsU0FDdkJhLFVBQWFiLEVBQWMsYUFDM0JjLFFBQVdkLEVBQWMsV0FDekJlLE1BQVNmLEVBQWMsU0FDdkJnQixRQUFXaEIsRUFBYyxXQUk3QixLQUFLLEdBQUlpQixLQUFRaEIsR0FDYixHQUE2QixrQkFBbEJBLEdBQVFnQixHQUFzQixDQUNyQyxHQUFJQyxHQUFTRCxDQUNUdkgsR0FBSXlILFFBQVFELElBQVcsSUFDdkJwQixFQUFTb0IsRUFDVG5CLEVBQVVFLEVBQVFpQixJQUs5QixNQUFPbkIsSUFFWHFCLFNBQVUsV0FFTmxHLEVBQUUsd0NBQXdDc0QsS0FBSyxTQUFTNkMsR0FDcEQsR0FBSUMsR0FBT3BHLEVBQUVnQixNQUFNcUYsS0FBSyxRQUNwQkMsRUFBTXJILFNBQVNDLGNBQWMsSUFDakNvSCxHQUFJQyxLQUFPSCxFQUNYSSxZQUFjRixFQUFJRyxTQUNsQmpGLFFBQVFtRCxZQUFZNkIsYUFFcEJ4RyxFQUFFZ0IsTUFBTTBGLFFBQVEsc0JBQXdCbEYsUUFBUW1ELFlBQVk2QixhQUFlLFNBQzNFLElBQUlHLEdBQWEzRyxFQUFFZ0IsTUFBTTRGLEtBQUssS0FBS0MsSUFBSSxTQUNuQ0MsRUFBaUI5RyxFQUFFZ0IsTUFBTTZGLElBQUksUUFHakM3RyxHQUFFZ0IsTUFBTStGLE1BQU0sV0FDVi9HLEVBQUVnQixNQUFNNkYsSUFBSSxRQUFTRixHQUNyQjNHLEVBQUVnQixNQUFNd0IsU0FBUyxtQkFDbEIsV0FDQ3hDLEVBQUVnQixNQUFNNkYsSUFBSSxRQUFTQyxHQUNyQjlHLEVBQUVnQixNQUFNbUMsWUFBWSx1QkFNaENULGFBQWMsV0FDVixHQUFJc0UsSUFDQUMsT0FBUSxtQ0FDUkMsT0FBUSxtQ0FHTjFGLFNBQVFFLFVBQ1YxQixFQUFFLGtCQUFrQm1ILEtBQUssZUFHN0JuSCxFQUFFLDhCQUE4QitHLE1BQU0sV0FFbEMvRyxFQUFFLGtCQUFrQnFHLEtBQUssTUFBT1csRUFBT0UsUUFDdkNsSCxFQUFFLGtCQUFrQnFHLEtBQUssTUFBT1csRUFBT0MsUUFDdkNqSCxFQUFFLGVBQWV1RSxTQUNqQnZFLEVBQUVnQixNQUFNd0IsU0FBUyxXQUNsQixXQUNDeEMsRUFBRSxlQUFld0UsVUFDakJ4RSxFQUFFZ0IsTUFBTW1DLFlBQVksV0FDckIsS0FFSG5ELEVBQUUsOEJBQThCK0QsTUFBTSxXQUM5Qi9ELEVBQUVnQixNQUFNWixTQUFTLFdBQ2pCSixFQUFFZ0IsTUFBTTRGLEtBQUssa0JBQWtCUCxLQUFLLE1BQU9XLEVBQU9FLFFBQ2xEbEgsRUFBRWdCLE1BQU00RixLQUFLLGtCQUFrQlAsS0FBSyxNQUFPVyxFQUFPQyxRQUNsRGpILEVBQUUsZUFBZXdFLFVBQ2pCeEUsRUFBRWdCLE1BQU1tQyxZQUFZLFlBR3BCbkQsRUFBRSxlQUFldUUsU0FDakJ2RSxFQUFFZ0IsTUFBTXdCLFNBQVMsY0FNN0I0RSxjQUFlLFdBSVgsSUFBS3BILEVBQUUsUUFBUUksU0FBUyxpQkFDcEIsT0FBTyxDQUdYLElBQUlpSCxHQUFnQi9GLGVBQWVDLGFBQWVNLFNBQVN5RixRQUMzRHRILEdBQUVwQixRQUFRMEYsT0FBTyxXQUNiLEdBQUl0RSxFQUFFLGlCQUFpQkcsc0JBQXdCSCxFQUFFLGlCQUFpQkksU0FBUyxrQkFBbUIsQ0FFMUYsR0FBSW1ILEdBQUl0SSxTQUNKdUksRUFBSUQsRUFBRXJJLGNBQWMsU0FFeEJzSSxHQUFFN0gsSUFBTSx3Q0FFUjZILEVBQUVDLGFBQWEsa0JBQW1CLEdBQUlDLE9BSXRDbkosT0FBTyx3Q0FBeUMsV0FDeEN5QixFQUFFLGlCQUFpQndDLFNBQVMsa0JBQzVCbUYsT0FBT0MsT0FDSEMsUUFBUSxFQUNSQyxPQUFRLFdBQ0o5RyxLQUFLK0csS0FBS0MsV0FBYVgsRUFDdkJyRyxLQUFLK0csS0FBS3ZKLElBQU02SSxZQVk1Q1ksa0JBQ0FDLGlCQUFpQixFQUNqQkMsbUJBQW1CLEVBQ25CbkcsS0FBTSxXQUNGaUcsaUJBQWlCRyxhQUVyQkMsa0JBQW1CLGFBR25CRCxVQUFXLFNBQVNFLEVBQVM3SixHQUN6QixHQUFJOEosSUFDQUMsS0FBTSxvSEFHTkMsRUFBTSxHQUFJQyxNQUNkRCxHQUFJL0ksT0FBUyxXQUNLK0ksRUFBSTdILE1BQVEsR0FBTzZILEVBQUkzSCxPQUFTLENBRzlDbUgsa0JBQWlCQyxpQkFBa0IsRUFDbkNELGlCQUFpQlUsY0FFckJGLEVBQUlHLFFBQVUsV0FFVlgsaUJBQWlCQyxpQkFBa0IsRUFDbkNELGlCQUFpQlUsY0FFckJGLEVBQUk5SSxJQUFNLDBCQUE0QjRJLEVBQWlCLE1BRzNETSxVQUFXLGFBR1hGLFdBQVksV0FHUixHQUF3QyxHQUFwQ1YsaUJBQWlCQyxnQkFBeUIsQ0FFMUMsR0FBeUIsS0FBckIxRyxRQUFRRyxVQU9SLE1BTkEzQixHQUFFLFNBQVM4SSxVQUNQQyxlQUFlLEVBQ2ZDLGVBQWdCLE1BQ2hCQyxXQUFXLEVBQ1hDLFVBQVUsS0FFUCxDQUVQMUgsU0FBUUcsVUFBWSxJQUNwQjNCLEVBQUUsU0FBUzhJLFVBQ1BDLGVBQWUsRUFDZkMsZUFBZ0IsTUFDaEJDLFdBQVcsRUFDWEMsVUFBVSxFQUNWQyxZQUFhLE1BSWpCbkosRUFBRSxTQUFTOEksVUFDUEMsZUFBZSxFQUNmQyxlQUFnQixNQUNoQkMsV0FBVyxFQUNYQyxVQUFVLFFBSWYsQ0FDSCxHQUF5QixLQUFyQjFILFFBQVFHLFVBUVIsTUFQQTNCLEdBQUUsU0FBUzhJLFVBQ1BDLGVBQWUsRUFDZkMsZUFBZ0IsTUFDaEJDLFdBQVcsRUFDWEMsVUFBVSxFQUNWQyxZQUFhLFFBRVYsQ0FFUDNILFNBQVFHLFVBQVksSUFDcEIzQixFQUFFLFNBQVM4SSxVQUNQQyxlQUFlLEVBQ2ZDLGVBQWdCLE1BQ2hCQyxXQUFXLEVBQ1hDLFVBQVUsRUFDVkMsWUFBYSxNQUlqQm5KLEVBQUUsU0FBUzhJLFVBQ1BDLGVBQWUsRUFDZkMsZUFBZ0IsTUFDaEJDLFdBQVcsRUFDWEMsVUFBVSxNQVk5QmxKLEdBQUVmLFVBQVVtSyxNQUFNLFdBQ2QsR0FBSUMsR0FBVXJKLEVBQUVwQixPQUVoQm9CLEdBQUVDLEdBQUc2SSxTQUFXLFNBQVNRLEdBb0JyQixRQUFTQyxLQUNMLEdBQUlDLEdBQVUsQ0FFZEMsR0FBU25HLEtBQUssV0FDVixHQUFJUixHQUFROUMsRUFBRWdCLEtBRWQsS0FBSTBJLEVBQVNDLGdCQUFtQjdHLEVBQU04RyxHQUFHLFlBR3pDLEdBQUk1SixFQUFFNkosWUFBWTdJLEtBQU0wSSxJQUNwQjFKLEVBQUU4SixZQUFZOUksS0FBTTBJLFFBRWpCLElBQUsxSixFQUFFK0osYUFBYS9JLEtBQU0wSSxJQUM1QjFKLEVBQUVnSyxZQUFZaEosS0FBTTBJLElBS3JCLEtBQU1GLEVBQVVFLEVBQVNPLGNBQ3JCLE9BQU8sTUFMWG5ILEdBQU1vSCxRQUFRLFVBRWRWLEVBQVUsSUFuQ3RCLEdBQ0lXLEdBREFWLEVBQVd6SSxLQUVYMEksR0FDQVUsVUFBVyxFQUNYSCxjQUFlLEVBQ2ZJLE1BQU8sU0FDUEMsT0FBUSxPQUNSQyxVQUFXM0wsT0FDWG9LLGVBQWdCLFdBQ2hCVyxnQkFBZ0IsRUFDaEJhLE9BQVEsS0FDUjFHLEtBQU0sS0FDTjJHLFlBQWEsaXJQQUNiMUIsZUFBZSxFQUNmRSxXQUFXLEVBQ1hDLFVBQVUsRUFDVkMsWUFBYSxJQTRKakIsT0EvSElHLEtBRUlvQixTQUFjcEIsRUFBUXFCLGVBQ3RCckIsRUFBUVcsY0FBZ0JYLEVBQVFxQixtQkFDekJyQixHQUFRcUIsY0FFZkQsU0FBY3BCLEVBQVFzQixjQUN0QnRCLEVBQVF1QixhQUFldkIsRUFBUXNCLGtCQUN4QnRCLEdBQVFzQixhQUduQjVLLEVBQUVFLE9BQU93SixFQUFVSixJQUl2QmEsRUFBcUNPLFNBQXZCaEIsRUFBU2EsV0FDbkJiLEVBQVNhLFlBQWMzTCxPQUFVeUssRUFBVXJKLEVBQUUwSixFQUFTYSxXQUd0RCxJQUFNYixFQUFTVyxNQUFNcEUsUUFBUSxXQUM3QmtFLEVBQVdXLEtBQUtwQixFQUFTVyxNQUFPLFdBQzVCLE1BQU9kLE9BSWZ2SSxLQUFLc0MsS0FBSyxXQUNOLEdBQUl5SCxHQUFPL0osS0FDUGdLLEVBQVFoTCxFQUFFK0ssRUFFZEEsR0FBS0UsUUFBUyxFQUdZUCxTQUF0Qk0sRUFBTTNFLEtBQUssUUFBd0IyRSxFQUFNM0UsS0FBSyxVQUFXLEdBQ3JEMkUsRUFBTXBCLEdBQUcsU0FDVG9CLEVBQU0zRSxLQUFLLE1BQU9xRCxFQUFTZSxhQUMzQk8sRUFBTXhJLFNBQVMsWUFNdkJ3SSxFQUFNRSxJQUFJLFNBQVUsV0FDaEIsSUFBS2xLLEtBQUtpSyxPQUFRLENBQ2QsR0FBSXZCLEVBQVNjLE9BQVEsQ0FDakIsR0FBSVcsR0FBZ0IxQixFQUFTMkIsTUFDN0IxQixHQUFTYyxPQUFPYSxLQUFLTixFQUFNSSxFQUFlekIsR0FFOUMsR0FBSTRCLEdBQWFOLEVBQU0zRSxLQUFLLFFBQVVxRCxFQUFTVixpQkFHM0NzQyxFQUFXckYsUUFBUSxlQUFtQnFGLEVBQVdyRixRQUFRLHVCQUUzQixHQUExQnlELEVBQVNYLGdCQUNUdUMsR0FBYyxLQUVPLEdBQXJCNUIsRUFBU1IsV0FDVG9DLEdBQWMsT0FBUzVCLEVBQVNQLGFBRVYsR0FBdEJPLEVBQVNULFlBQ1RxQyxHQUFjLGlCQUt0QnRMLEVBQUUsV0FDRzhLLEtBQUssT0FBUSxXQUVWRSxFQUFNTyxPQUVGUCxFQUFNcEIsR0FBRyxPQUNUb0IsRUFBTTNFLEtBQUssTUFBT2lGLEdBRWxCTixFQUFNbkUsSUFBSSxtQkFBb0IsUUFBVXlFLEVBQWEsTUFFekROLEVBQU10QixFQUFTWSxRQUFRWixFQUFTbUIsY0FFaENFLEVBQUtFLFFBQVMsQ0FHZCxJQUFJTyxHQUFPeEwsRUFBRXlMLEtBQUtoQyxFQUFVLFNBQVNpQyxHQUNqQyxPQUFRQSxFQUFRVCxRQUlwQixJQUZBeEIsRUFBV3pKLEVBQUV3TCxHQUVUOUIsRUFBUzVGLEtBQU0sQ0FDZixHQUFJcUgsR0FBZ0IxQixFQUFTMkIsTUFDN0IxQixHQUFTNUYsS0FBS3VILEtBQUtOLEVBQU1JLEVBQWV6QixHQUU1Q3NCLEVBQU03SCxZQUFZLGFBRXJCa0QsS0FBSyxNQUFPaUYsTUFNckIsSUFBTTVCLEVBQVNXLE1BQU1wRSxRQUFRLFdBQzdCK0UsRUFBTUYsS0FBS3BCLEVBQVNXLE1BQU8sV0FDbEJVLEVBQUtFLFFBQ05ELEVBQU1kLFFBQVEsY0FPOUJiLEVBQVF5QixLQUFLLFNBQVUsV0FDbkJ2QixNQUtBLCtCQUFpQ29DLEtBQUt6SixVQUFVSSxhQUNoRCtHLEVBQVF5QixLQUFLLFdBQVksU0FBU1QsR0FDMUJBLEVBQU11QixlQUFpQnZCLEVBQU11QixjQUFjQyxXQUMzQ3BDLEVBQVNuRyxLQUFLLFdBQ1Z0RCxFQUFFZ0IsTUFBTWtKLFFBQVEsY0FPaENsSyxFQUFFZixVQUFVbUssTUFBTSxXQUNkRyxNQUdHdkksTUFNWGhCLEVBQUUrSixhQUFlLFNBQVMyQixFQUFTaEMsR0FDL0IsR0FBSW9DLEVBUUosT0FMSUEsR0FEdUJwQixTQUF2QmhCLEVBQVNhLFdBQTJCYixFQUFTYSxZQUFjM0wsUUFDbkRBLE9BQU9tTixZQUFjbk4sT0FBT21OLFlBQWMxQyxFQUFRdkksVUFBWXVJLEVBQVE3SSxZQUV2RVIsRUFBRTBKLEVBQVNhLFdBQVd0SixTQUFTVixJQUFNUCxFQUFFMEosRUFBU2EsV0FBV3pKLFNBRy9EZ0wsR0FBUTlMLEVBQUUwTCxHQUFTekssU0FBU1YsSUFBTW1KLEVBQVNVLFdBR3REcEssRUFBRWdLLFlBQWMsU0FBUzBCLEVBQVNoQyxHQUM5QixHQUFJb0MsRUFRSixPQUxJQSxHQUR1QnBCLFNBQXZCaEIsRUFBU2EsV0FBMkJiLEVBQVNhLFlBQWMzTCxPQUNwRHlLLEVBQVF6SSxRQUFVeUksRUFBUTNJLGFBRTFCVixFQUFFMEosRUFBU2EsV0FBV3RKLFNBQVNSLEtBQU9ULEVBQUUwSixFQUFTYSxXQUFXM0osUUFHaEVrTCxHQUFROUwsRUFBRTBMLEdBQVN6SyxTQUFTUixLQUFPaUosRUFBU1UsV0FHdkRwSyxFQUFFNkosWUFBYyxTQUFTNkIsRUFBU2hDLEdBQzlCLEdBQUlvQyxFQVFKLE9BTElBLEdBRHVCcEIsU0FBdkJoQixFQUFTYSxXQUEyQmIsRUFBU2EsWUFBYzNMLE9BQ3BEeUssRUFBUTdJLFlBRVJSLEVBQUUwSixFQUFTYSxXQUFXdEosU0FBU1YsSUFHbkN1TCxHQUFROUwsRUFBRTBMLEdBQVN6SyxTQUFTVixJQUFNbUosRUFBU1UsVUFBWXBLLEVBQUUwTCxHQUFTNUssVUFHN0VkLEVBQUU4SixZQUFjLFNBQVM0QixFQUFTaEMsR0FDOUIsR0FBSW9DLEVBUUosT0FMSUEsR0FEdUJwQixTQUF2QmhCLEVBQVNhLFdBQTJCYixFQUFTYSxZQUFjM0wsT0FDcER5SyxFQUFRM0ksYUFFUlYsRUFBRTBKLEVBQVNhLFdBQVd0SixTQUFTUixLQUduQ3FMLEdBQVE5TCxFQUFFMEwsR0FBU3pLLFNBQVNSLEtBQU9pSixFQUFTVSxVQUFZcEssRUFBRTBMLEdBQVM5SyxTQUc5RVosRUFBRWdNLFdBQWEsU0FBU04sRUFBU2hDLEdBRTdCLFFBQVExSixFQUFFZ0ssWUFBWTBCLEVBQVNoQyxJQUFjMUosRUFBRThKLFlBQVk0QixFQUFTaEMsSUFDL0QxSixFQUFFK0osYUFBYTJCLEVBQVNoQyxJQUFjMUosRUFBRTZKLFlBQVk2QixFQUFTaEMsS0FPdEUxSixFQUFFRSxPQUFPRixFQUFFaU0sS0FBSyxNQUNaQyxpQkFBa0IsU0FBU0MsR0FDdkIsTUFBT25NLEdBQUUrSixhQUFhb0MsR0FDbEIvQixVQUFXLEtBR25CZ0MsZ0JBQWlCLFNBQVNELEdBQ3RCLE9BQVFuTSxFQUFFK0osYUFBYW9DLEdBQ25CL0IsVUFBVyxLQUduQmlDLGtCQUFtQixTQUFTRixHQUN4QixNQUFPbk0sR0FBRWdLLFlBQVltQyxHQUNqQi9CLFVBQVcsS0FHbkJrQyxpQkFBa0IsU0FBU0gsR0FDdkIsT0FBUW5NLEVBQUVnSyxZQUFZbUMsR0FDbEIvQixVQUFXLEtBR25CbUMsY0FBZSxTQUFTSixHQUNwQixNQUFPbk0sR0FBRWdNLFdBQVdHLEdBQ2hCL0IsVUFBVyxLQUluQm9DLGlCQUFrQixTQUFTTCxHQUN2QixPQUFRbk0sRUFBRStKLGFBQWFvQyxHQUNuQi9CLFVBQVcsS0FHbkJxQyxnQkFBaUIsU0FBU04sR0FDdEIsTUFBT25NLEdBQUVnSyxZQUFZbUMsR0FDakIvQixVQUFXLEtBR25Cc0MsZUFBZ0IsU0FBU1AsR0FDckIsT0FBUW5NLEVBQUVnSyxZQUFZbUMsR0FDbEIvQixVQUFXLE9BS3ZCNUksUUFBUVEsT0FDUmlHLGlCQUFpQmpHLE9BQ2JoQyxFQUFFLFFBQVFJLFNBQVMsbUJBQ25Cb0IsUUFBUTBFLFdBQ1IxRSxRQUFRNEYiLCJmaWxlIjoiZGV2Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQuZm4uZXh0ZW5kKHtcblxuICAgIGlzT25TY3JlZW5WaXNpYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHtcbiAgICAgICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgbGVmdDogd2luLnNjcm9sbExlZnQoKVxuICAgICAgICB9O1xuICAgICAgICB2aWV3cG9ydC5yaWdodCA9IHZpZXdwb3J0LmxlZnQgKyB3aW4ud2lkdGgoKTtcbiAgICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSB0aGlzLm9mZnNldCgpO1xuICAgICAgICBib3VuZHMucmlnaHQgPSBib3VuZHMubGVmdCArIHRoaXMub3V0ZXJXaWR0aCgpO1xuICAgICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIHRoaXMub3V0ZXJIZWlnaHQoKTtcblxuICAgICAgICByZXR1cm4gKCEodmlld3BvcnQucmlnaHQgPCBib3VuZHMubGVmdCB8fCB2aWV3cG9ydC5sZWZ0ID4gYm91bmRzLnJpZ2h0IHx8IHZpZXdwb3J0LmJvdHRvbSA8IGJvdW5kcy50b3AgfHwgdmlld3BvcnQudG9wID4gYm91bmRzLmJvdHRvbSkpO1xuICAgIH0sXG5cbn0pO1xuXG5mdW5jdGlvbiBsb2FkSlModXJsLCBjYWxsYmFjaywgZWwpIHtcbiAgICB2YXIgaXNJRSA9ICEhd2luZG93LkFjdGl2ZVhPYmplY3QsXG4gICAgICAgIGlzSUU2ID0gaXNJRSAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0LFxuICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLFxuICAgICAgICBoZWFkID0gaXNJRTYgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgIHNjcmlwdC5hc3luYyA9IHRydWU7XG4gICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlKSB7XG4gICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PSBcImxvYWRlZFwiIHx8IHNjcmlwdC5yZWFkeVN0YXRlID09IFwiY29tcGxldGVcIikge1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICBpZiAoZWwpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUoc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQpO1xuICAgIH1cbn07XG5cbi8qKlxuICogWWFzdWtvIOmFjee9ruaWh+S7tlxuICog5aSa6K+06K+E6K666LCD55So562JXG4gKi9cblxudmFyIGR1b3NodW9RdWVyeSA9IHtcbiAgICBzaG9ydF9uYW1lOiBcImx1b2xlaVwiXG59O1xuXG52YXIgR2xvYmFsQ29uZmlndWUgPSB7XG4gICAgbWFzdGVyRG9tYWluOiAnaHR0cHM6Ly9sdW9sZWkub3JnJyxcbn1cblxuXG52YXIgR2VuZXJhbCA9IHtcbiAgICBpc01vYmlsZTogZmFsc2UsXG4gICAgaXNXZWNoYXQ6IGZhbHNlLFxuICAgIHZpZXdXaWR0aDogJCh3aW5kb3cpLndpZHRoKCksXG4gICAgYWJzVXJsOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0LFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgd2luID0gd2luZG93O1xuICAgICAgICB2YXIgZG9jID0gd2luLmRvY3VtZW50O1xuICAgICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcbiAgICAgICAgdmFyIGlzQW5kcm9pZCA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvYW5kcm9pZC9naSk7XG4gICAgICAgIHZhciBpc0lQaG9uZSA9IHdpbi5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvaXBob25lL2dpKTtcbiAgICAgICAgaWYgKFVBLm1hdGNoKC9NaWNyb01lc3Nlbmdlci9pKSA9PSBcIm1pY3JvbWVzc2VuZ2VyXCIpIHtcbiAgICAgICAgICAgIEdlbmVyYWwuaXNXZWNoYXQgPSB0cnVlO1xuICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCd3ZWNoYXQtd2VidmlldycpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEhaXNBbmRyb2lkKSB7XG4gICAgICAgICAgICBHZW5lcmFsLmlzTW9iaWxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdwb3N0LXRlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIEdlbmVyYWwudXBkYXRlSW1hZ2VXaWR0aCgpO1xuICAgICAgICAgICAgR2VuZXJhbC5yZXdhcmRMb2FkZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIEdlbmVyYWwud2ViRm9udExvYWRlcigpO1xuICAgICAgICBHZW5lcmFsLnNjcm9sbFRvUG9zKCk7XG4gICAgICAgIEdlbmVyYWwuYXJyb3dFdmVudCgpO1xuICAgIH0sXG4gICAgdXBkYXRlSW1hZ2VXaWR0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkcG9zdENvbnRlbnQgPSAkKFwiLnBvc3QtY29udGVudFwiKTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVJbWFnZVdpZHRoKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSAkcG9zdENvbnRlbnQub3V0ZXJXaWR0aCgpLCAvLyBXaWR0aCBvZiB0aGUgY29udGVudFxuICAgICAgICAgICAgICAgIGltYWdlV2lkdGggPSB0aGlzLm5hdHVyYWxXaWR0aDsgLy8gT3JpZ2luYWwgaW1hZ2UgcmVzb2x1dGlvblxuXG4gICAgICAgICAgICBpZiAoaW1hZ2VXaWR0aCA+PSBjb250ZW50V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnZnVsbC1pbWcnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2Z1bGwtaW1nJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2luZ2xlLXBvc3QtaW5uZXIgaW1nXCIpLm9uKCdsb2FkJywgdXBkYXRlSW1hZ2VXaWR0aCk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2FzcGVyRnVsbEltZygpIHtcbiAgICAgICAgICAgICRpbWcuZWFjaCh1cGRhdGVJbWFnZVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc3BlckZ1bGxJbWcoKTtcbiAgICB9LFxuICAgIHdlYkZvbnRMb2FkZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBXZWJGb250Q29uZmlnID0ge1xuICAgICAgICAgICAgbG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvYWRpbmcgZm9udCcpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgZmFtaWxpZXM6IFsnRXhvJywgJ2ljb25mb250J10sXG4gICAgICAgICAgICAgICAgdXJsczogW0dlbmVyYWwuYWJzVXJsICsgJy9hc3NldHMvY3NzL2ZvbnQubWluLmNzcyddXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxvYWRKUyhHZW5lcmFsLmFic1VybCArICcvYXNzZXRzL2pzL3dlYmZvbnQuanMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICAgICAgICAgICAgY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgIGZhbWlsaWVzOiBbJ0V4bycsICdpY29uZm9udCddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG5cblxuXG4gICAgfSxcbiAgICBhcnJvd0V2ZW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLmFycm93X2Rvd24nKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJCh3aW5kb3cpLmhlaWdodCgpIC0gMjBcbiAgICAgICAgICAgIH0sIDYwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIC8v5bmz5ruR5rua5Yqo5Yiw6aG26YOoXG4gICAgc2Nyb2xsVG9Qb3M6IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBTVFJfVE9fVE9QID0gJ+aIkeimgemjnuWIsOacgOmrmCcsXG4gICAgICAgICAgICBjb3ZlckhlaWdodCA9IHBvc2l0aW9uIHx8ICQod2luZG93KS5oZWlnaHQoKTsgLy/ojrflvpflm77niYfpq5jluqZcbiAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJzxhIGhyZWY9XCIjXCIgaWQ9XCJ0by10b3BcIiB0aXRsZT1cIicgKyBTVFJfVE9fVE9QICsgJ1wiPiA8ZGl2IGNsYXNzPVwidG8tdG9wLXdyYXBcIj48L2Rpdj48L2E+JykuYXBwZW5kVG8oJ2JvZHknKTtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAkKHdpbmRvdykuaGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZmFkZUluKDUwMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5mYWRlT3V0KDUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAkKCdodG1sLGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IDBcbiAgICAgICAgICAgIH0sIDY2NiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSAnIyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9LFxuICAgIC8q57uZ5paH56ug5Lit55qEdXJs5re75YqgaWNvbmZvbnTmlrnkvr/or4bliKsqL1xuICAgIHVybEljb25saXplOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgdmFyIGRvbWFpbixcbiAgICAgICAgICAgIF9vdXRwdXQ7XG4gICAgICAgIHZhciBpY29uRm9udFRhZyA9ICdpY29uZm9udCc7XG4gICAgICAgIHZhciBpY29uTWFwID0geyAvKue0ouW8lSDlj6/lnKjov5nph4zmt7vliqDljLnphY3op4TliJkqL1xuICAgICAgICAgICAgJ3R3aXR0ZXInOiBpY29uRm9udFRhZyArICctdHdpdHRlcicsXG4gICAgICAgICAgICAncXpvbmUnOiBpY29uRm9udFRhZyArICctcXpvbmUnLFxuICAgICAgICAgICAgJ3dlaWJvJzogaWNvbkZvbnRUYWcgKyAnLXdlaWJvJyxcbiAgICAgICAgICAgICdmYWNlYm9vayc6IGljb25Gb250VGFnICsgJy1mYWNlYm9vaycsXG4gICAgICAgICAgICAnZ2l0aHViJzogaWNvbkZvbnRUYWcgKyAnLWdpdGh1YicsXG4gICAgICAgICAgICAnZG91YmFuJzogaWNvbkZvbnRUYWcgKyAnLWRvdWJhbicsXG4gICAgICAgICAgICAnZ29vZ2xlJzogaWNvbkZvbnRUYWcgKyAnLWdvb2dsZScsXG4gICAgICAgICAgICAnbHVvbGVpJzogaWNvbkZvbnRUYWcgKyAnLWx1b2xlaScsXG4gICAgICAgICAgICAnZHJpYmJsZSc6IGljb25Gb250VGFnICsgJy1kcmliYmxlJyxcbiAgICAgICAgICAgICd2MmV4JzogaWNvbkZvbnRUYWcgKyAnLXYyZXgnLFxuICAgICAgICAgICAgJ3poaWh1JzogaWNvbkZvbnRUYWcgKyAnLXpoaWh1JyxcbiAgICAgICAgICAgICd3aWtpcGVkaWEnOiBpY29uRm9udFRhZyArICctd2lraXBlZGlhJyxcbiAgICAgICAgICAgICdqaWFuc2h1JzogaWNvbkZvbnRUYWcgKyAnLWppYW5zaHUnLFxuICAgICAgICAgICAgJ3lvdWt1JzogaWNvbkZvbnRUYWcgKyAnLXlvdWt1JyxcbiAgICAgICAgICAgICd5b3V0dWJlJzogaWNvbkZvbnRUYWcgKyAnLXlvdXR1YmUnXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gaWNvbk1hcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uTWFwW25hbWVdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1hcEtleSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKE1hcEtleSkgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4gPSBNYXBLZXk7XG4gICAgICAgICAgICAgICAgICAgIF9vdXRwdXQgPSBpY29uTWFwW01hcEtleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9vdXRwdXQ7XG4gICAgfSxcbiAgICBhZGRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgIC8q57uZ5Y2a5a6i5paH56ug5Zyw5Z2AdXJs5re75YqgaWNv6K+G5YirKi9cbiAgICAgICAgJCgnLnNpbmdsZS1wb3N0LWlubmVyICBhOm5vdCg6aGFzKGltZykpJykuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICB2YXIgX3NyYyA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgICAgdmFyIHRtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHRtcC5ocmVmID0gX3NyYztcbiAgICAgICAgICAgIF9zZWxmRG9tYWluID0gdG1wLmhvc3RuYW1lO1xuICAgICAgICAgICAgR2VuZXJhbC51cmxJY29ubGl6ZShfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhfc2VsZkRvbWFpbik7XG4gICAgICAgICAgICAkKHRoaXMpLnByZXBlbmQoJzxpIGNsYXNzPVwiaWNvbmZvbnQgJyArIEdlbmVyYWwudXJsSWNvbmxpemUoX3NlbGZEb21haW4pICsgJ1wiPjwvaT4nKTtcbiAgICAgICAgICAgIHZhciBfc2VsZkNvbG9yID0gJCh0aGlzKS5maW5kKCdpJykuY3NzKCdjb2xvcicpLFxuICAgICAgICAgICAgICAgIF9vcmlnaW5hbENvbG9yID0gJCh0aGlzKS5jc3MoJ2NvbG9yJyk7XG5cbiAgICAgICAgICAgIC8q6byg5qCH5oKs5rWu5pe2Ki9cbiAgICAgICAgICAgICQodGhpcykuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2NvbG9yJywgX3NlbGZDb2xvcik7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYW5pbWF0ZWQgcHVsc2UnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdjb2xvcicsIF9vcmlnaW5hbENvbG9yKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBwdWxzZScpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvL+aJk+i1j1xuICAgIHJld2FyZExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsb2FkUVIgPSB7XG4gICAgICAgICAgICBhbGlwYXk6ICcvYXNzZXRzL2ltYWdlcy9xci1hbGlwYXktMjU2LnBuZycsXG4gICAgICAgICAgICB3ZWNoYXQ6ICcvYXNzZXRzL2ltYWdlcy9xci13ZWNoYXQtMjU2LnBuZydcbiAgICAgICAgfVxuICAgICAgICB2YXIgbG9hZFFSVXJsO1xuICAgICAgICBpZiAoISFHZW5lcmFsLmlzV2VjaGF0KSB7XG4gICAgICAgICAgICAkKCcud2VjaGF0LWNvZGUgYicpLmh0bWwoJ+mVv+aMieS4iuaWueS6jOe7tOeggeaJk+i1j+S9nOiAhScpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnLm1vbmV5LWxpa2UgLnJld2FyZC1idXR0b24nKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmgqzmta4nKVxuICAgICAgICAgICAgJCgnaW1nLndlY2hhdC1pbWcnKS5hdHRyKCdzcmMnLCBsb2FkUVIud2VjaGF0KTtcbiAgICAgICAgICAgICQoJ2ltZy5hbGlwYXktaW1nJykuYXR0cignc3JjJywgbG9hZFFSLmFsaXBheSk7XG4gICAgICAgICAgICAkKCcubW9uZXktY29kZScpLmZhZGVJbigpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnLm1vbmV5LWNvZGUnKS5mYWRlT3V0KCk7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSwgODAwKVxuXG4gICAgICAgICQoJy5tb25leS1saWtlIC5yZXdhcmQtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2ltZy53ZWNoYXQtaW1nJykuYXR0cignc3JjJywgbG9hZFFSLndlY2hhdCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdpbWcuYWxpcGF5LWltZycpLmF0dHIoJ3NyYycsIGxvYWRRUi5hbGlwYXkpO1xuICAgICAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJy5tb25leS1jb2RlJykuZmFkZUluKCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cblxuICAgIH0sXG4gICAgY29tbWVudExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcHBpZCA9ICdjeXQxdEpIU0knO1xuICAgICAgICB2YXIgY29uZiA9ICdwcm9kXzIxM2QyM2VmZDljMzQ2ZjFkODg0OTUxZWZmNGE0ZWZkJztcblxuICAgICAgICBpZiAoISQoJ2JvZHknKS5oYXNDbGFzcygncG9zdC10ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8g6L+Z6YeM6K6+572u6K+E6K6657uE5Lu255qEdGhyZWFkSWRcbiAgICAgICAgdmFyIGRhdGFUaHJlYWRLZXkgPSBHbG9iYWxDb25maWd1ZS5tYXN0ZXJEb21haW4gKyBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkKCcuYXV0aG9yLWltYWdlJykuaXNPblNjcmVlblZpc2libGUoKSAmJiAhJCgnLmF1dGhvci1pbWFnZScpLmhhc0NsYXNzKCdjb21tZW50LWxvYWRlZCcpKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LFxuICAgICAgICAgICAgICAgICAgICBzID0gZC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICAgICAgICAgIHMuc3JjID0gJ2h0dHBzOi8vbHVvbGVpb3JnLmRpc3F1cy5jb20vZW1iZWQuanMnO1xuXG4gICAgICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGltZXN0YW1wJywgK25ldyBEYXRlKCkpO1xuICAgICAgICAgICAgICAgIC8vIChkLmhlYWQgfHwgZC5ib2R5KS5hcHBlbmRDaGlsZChzKTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIChHZW5lcmFsLnZpZXdXaWR0aCA+IDk2MCkge1xuICAgICAgICAgICAgICAgIGxvYWRKUygnaHR0cHM6Ly9sdW9sZWlvcmcuZGlzcXVzLmNvbS9lbWJlZC5qcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLmF1dGhvci1pbWFnZScpLmFkZENsYXNzKCdjb21tZW50LWxvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgRElTUVVTLnJlc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlLmlkZW50aWZpZXIgPSBkYXRhVGhyZWFkS2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZS51cmwgPSBkYXRhVGhyZWFkS2V5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cblxudmFyIEltYWdlU21hcnRMb2FkZXIgPSB7XG4gICAgaXNXZWJQU3VwcG9ydGVkOiBmYWxzZSxcbiAgICBpc0ltYWdlQ29tcHJlc3NlZDogZmFsc2UsXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUENoZWNrKCk7XG4gICAgfSxcbiAgICBpc0NvbXByZXNzZWRDaGVjazogZnVuY3Rpb24oKSB7XG5cbiAgICB9LFxuICAgIHdlYlBDaGVjazogZnVuY3Rpb24oZmVhdHVyZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIFRlc3RJbWFnZXMgPSB7XG4gICAgICAgICAgICBkZW1vOiBcIlVrbEdSa29BQUFCWFJVSlFWbEE0V0FvQUFBQVFBQUFBQUFBQUFBQUFRVXhRU0FzQUFBQUJCeEFSRVlpSS9nY0FBQUJXVURnZ0dBQUFBREFCQUowQktnRUFBUUFCQUJ3bHBBQURjQUQrL2diUUFBPT1cIlxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZygn5pSv5oyBV2VicOWTpicpO1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSAoaW1nLndpZHRoID4gMCkgJiYgKGltZy5oZWlnaHQgPiAwKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlK/mjIFXZWJwJyk7XG4gICAgICAgICAgICAvLyBhbGVydCgn5pSv5oyBJylcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIud2ViUExvYWRlcigpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4jeaUr+aMgVdlYnAnKTtcbiAgICAgICAgICAgIEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICBJbWFnZVNtYXJ0TG9hZGVyLndlYlBMb2FkZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgaW1nLnNyYyA9IFwiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxcIiArIFRlc3RJbWFnZXNbJ2RlbW8nXTtcblxuICAgIH0sXG4gICAgaW1nTG9hZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+WKoOi9vem7mOiupOWbvueJhycpO1xuICAgIH0sXG4gICAgd2ViUExvYWRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfliqDovb13ZWJQJyk7XG4gICAgICAgIC8vIGFsZXJ0KEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkKTtcbiAgICAgICAgaWYgKEltYWdlU21hcnRMb2FkZXIuaXNXZWJQU3VwcG9ydGVkID09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflrr3luqbmmK8nICsgR2VuZXJhbC52aWV3V2lkdGgpO1xuICAgICAgICAgICAgaWYgKEdlbmVyYWwudmlld1dpZHRoID09IDc2OCkge1xuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ+aZrumAmuaUr+aMgScpXG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPT0gNzY4KSB7XG4gICAgICAgICAgICAgICAgJChcIi5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWRfbG9hZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6ICd1cmwnLFxuICAgICAgICAgICAgICAgICAgICB3ZWJQX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc19zY2FsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVfd2lkdGg6IDE1MDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoR2VuZXJhbC52aWV3V2lkdGggPCA3NjgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxhenlcIikubGF6eWxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZF9sb2FkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhX2F0dHJpYnV0ZTogJ3VybCcsXG4gICAgICAgICAgICAgICAgICAgIHdlYlBfbG9hZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzX3NjYWxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZV93aWR0aDogNzUwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KCfmma7pgJrmlK/mjIEnKVxuICAgICAgICAgICAgICAgICQoXCIubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAndXJsJyxcbiAgICAgICAgICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNfc2NhbGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0sXG5cblxufVxuXG5cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgICAkLmZuLmxhenlsb2FkID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzO1xuICAgICAgICB2YXIgJGNvbnRhaW5lcjtcbiAgICAgICAgdmFyIHNldHRpbmdzID0ge1xuICAgICAgICAgICAgdGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgZmFpbHVyZV9saW1pdDogMCxcbiAgICAgICAgICAgIGV2ZW50OiBcInNjcm9sbFwiLFxuICAgICAgICAgICAgZWZmZWN0OiBcInNob3dcIixcbiAgICAgICAgICAgIGNvbnRhaW5lcjogd2luZG93LFxuICAgICAgICAgICAgZGF0YV9hdHRyaWJ1dGU6IFwib3JpZ2luYWxcIixcbiAgICAgICAgICAgIHNraXBfaW52aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGFwcGVhcjogbnVsbCxcbiAgICAgICAgICAgIGxvYWQ6IG51bGwsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhiZ0FLQUlBQUFQLy8vLy8vL3lIL0MwNUZWRk5EUVZCRk1pNHdBd0VBQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUFBQ0lJeVBxY3Z0RDZPY3ROcUxzOTY4K3crRzRraVc1b21tNnNxMjdndkg4bFVBQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUStjTWxKcTcwNDY4MjcvMkFvam1TSkdjaEJKR2JydmhzQ3pJY0EzM2g3ekhPUS8wQVBnWGNvQkkvSVNnS3dJeWlTVUtRZ1VIaEdyOWlzZHN0OVJRQUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkQ1d3lVbXJ2VGpyemJ2L1lDaU9aR2xhQm5JUXllbSs4SVVBOUNIRWVFNGVOQjNvd09DRzBEc1VoTWlrSkFIZ0VSVEthRkFRS0VDbDJLeDJ5OTFHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVQbkRKU2F1OU9Pdk51LzlnS0k1a2FaWUdjaERKNmI3d2hRRDBJY1I0VGg0MEhlakE0SWJRT3hTRXlLUWtBZUFSRk1wb1VCQW9RS1hZckhiTGpVVUFBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwbnBpQkhFU0N2bkE4SVVCOUNIS3VoMGRkQjd1Z0VFUHdIUXJEWkRJQjZCRVV5bWhRRUNoQXBkaXNkc3NOUlFBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVuWUVjUklLK2NEd2hRSDBJY3E2SFIxMEh1NkFRUS9BZENzTmtNZ0hvRVJUS2FGQVFLRUNsMkt4MnkrVkVBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVVYREpTYXU5T092TnUvOWdLSTVrdVNURWdSaG1pNkVxNjVZQ1lBUElyQy8xbmUraXdBRXdQQUJkQWFMTmVBUVZiZ0JDMC9SVVNxY2VSWXFZd0pJTTIwUFgyMUVVQWdJeXlZeFd1OS93dUh3YUFRQWgrUVFJQ1FBQUFDd0FBQUFBYmdBS0FJTzBzclRjMnR6MDh2VEV3c1M4dnJ6azR1VDgrdnkwdHJUTXpzems1dVQ4L3Z6Ly8vOEFBQUFBQUFBQUFBQUFBQUFFVTNESlNhdTlPT3ZOdS85Z0tJNWtXU2JFZ1JqbVppQUhrYlQwS0FBNGdOUVlraDhDbnBBVE9BQ01oMkVsaHdzb241WUNrd0NWRUk3SFFuV3JTQjFuMVVTT29OaHlDNEdnV1JCSWxNM3d1SHhPaDBjQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVJRY01sSnE3MDQ2ODI3LzJBb2ptUnBlZ2x4SU1hWXJ1MHB6NWNBM0FBaTJyaE8vN1RBQVRBOGlBTEVteEhJTkJWd0FJTG9tWlEycnlLRmlwZ1FHYmFITG5iOFVSUUNBcElaVFc2NzMvQzRPd0lBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJGVnd5VW1ydlRqcnpidi9ZQ2lPWkdtZVMwSWNpSkVaeUVFa2FHMS9BcUFEU0lic0I4RnRTS3dFRGdEa0liUFRCWXJRWWFGSnlCQ1N5VUowaTFLc2tqUk1Za2RRY004bFJTRWcxQWdDQ1RONlRxL2I3NllJQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUlNjTWxKcTcwNDY4MjcvMkFvam1ScG5sWkNISWhScWF5THpyUW9BRGlBVUhlKzE4QmdKbkFBRkErVWdCR0hGRHFmaFJ5QVFJa3VxYzhzVUxFeUppaUc3dUdyTGM4VWhZREFnbGFiMy9DNGZINktBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTZrbHhBSFlwU3NaaUFIa1ZSdlBMZWNBT3dBZ3Y4VUJPOGdDQTZMUUV6Z0FHQWVra0RlTGtCaDhxaFFTMEZLeU9JSXpXYUJBdDRkeGw2S0F0VzhwVWtKSGtGQmlUUG5iM1VoZ015VEJBRUpkQldBQllOK2lJbUtpNHh2RVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVZM0RKU2F1OU9Pdk51LzlnS0k1azJTWEVnUmdtaDZvczlhNXRqUWxBRGlEMnJlOFVuSTdYS3k0Q0IwRHlZS3dFbERubTVKbFVObnVGSCtFNnlVSzMzU2dBekRVcFVzcEVlV0ZBSDlTVDloSytMaWtLQVVGOWNjOWIrbnA3Z29PRWhZWkZFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWFYREpTYXU5T092TnUvOWdLSTVrYVZvSmNTREdhQ0FIa1ZSdlBKKzRLUUE4Z0l5STNrRkFDZktHdWFRb2NBQTBENk1lTDBCcDlxaktiS2NnSll3SVRtZUJBajZPdGVpTVF1VzhoUkk5Z29JQ2I4clQrSXVpRUNDU0JBRUpjeFdBQllONWlJbUtpNHlMRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVaSERKU2F1OU9Pdk51LzlnS0k1a2FZSUpjU0NHbHE0dDliSm5iVjhDb0FOSWx1Kzl5VThYdkJscmdRTkFlY2dFbHJybTVLbGNIcSttd2c1QXlHaWgzY2xYR2NhYVFRclZNcEV4cUEvc2lac1pQOXM3aWtKQXNNbnZMWDU4ZDRPRWhZYUhaeEVBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJHbHd5VW1ydlRqcnpidi9ZQ2lPWkdtV0NYRWdSbVVnQjVHNHNIemVPQ2NBUElCVWlONUJRQW55aHJta1VoSTRBSnlIU284WG9EaDcxYVgyVkpnU0tvVG5zMEFKSDhuYjlFaWhlczRvaVI1QkFSZlAxZmlRb2hBZ1dnUUJDWFFWZ0FXRGVZaUppb3VNTnhFQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCSE53eVVtcnZUanJ6YnYvWUNpT3BHYVVxSWtjUkdJbHhJR2NGQ3pUYVlYa1BJVUF3SU9BSWdBQ2Q1T2lFZG1USEpvOUl6QkFDVWlmRTZzUkN5VkFlUVRBUVZ5Z0ZNWmo3NlFnRnF1aHJtOHFZU1FvS0lxWU9DNHg2QUY4Y29JbEFnRUpkeFVLQlFGRGlZdU5nNUdTazVTVmxoUVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFTQWNNbEpxNzA0NjgyNy8yQW9qbVJaSmNTQkdDYUhxaXhsSUFlUlZITjl0NlVBL0FBRUwrTURDaWtJNEVHQVZES0hvc0FCTUQxQUx3SHF6MG9CL2dLVUtSQjhCUlc4aEhMbHJFMVRDTnBENGEyY3F6MktGSFYzWHhqMEIzd1NDVUFFQ2hTRVU0WjllQVVCVDR3TENvNlFGQUlCQ1ljVmx3V2FrWitnb2FLam9CRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkgxd3lVbXJ2VGpyemJ2L1lDaU9aRWtteElFWW80RWNSR0toS2t2UnE2bDdBdUFEaUJIaWR4QlFlci9nQk9sVDdwNll3QUV3UFl4K3ZnQWxnTFZPdUVTbzJGTEFFa1lFS3JWQUtWUUI1MG01R2gvYkZTbXFUSlQ0RVJRVWVGVjdFZ1o1QUlSMll3b0ZBVVlrQWdFSmdCV01qaGFXajRxYm5KMmVuNkFoRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVnSERKU2F1OU9Pdk51LzlnS0k1a2FXSUpjU0NHbHE0dFpTQUhrVlJ6Zlo5OEtRQkFBQ0x6Q3c0cGlPQkJnRlF5ZTFCUTRBQ2dIaktCS3ZCS0NRSURGR29RSEMxekNsNUNCcTFWVXdqYVErR3RuSnZ2R0lXcXVyc1k5Z2Q5RWdsQkJBb1VoRlNHZUl3V0NnVUJUeG1Qa1JjQ0FRbUhGWmNGbW8yZm9LR2lvNThSQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUi9jTWxKcTcwNDY4MjcvMkFvam1ScGRnbHhJRVpsSUFlUldPbmFValY3N3Z3aUFFQUFvb0lJSGdTVVgzQTRVUUtadmFnb2NBQlVENVVnTUVBSmFMRVRyMUZLQmhXMGhBckJhaTFRQ2xkQWVuSyt6c3Q0alVKbG5lR0NCQW9VZTFkK0VnWjhBSVo1akJZS0JRRklGZ0lCQ1lJVmo1R09rSktObnArZ29hSlNFUUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRWdIREpTYXU5T092TnUvOWdLSTVrYVhZR2NoQ0psUkFIWWxUcDJtWnZQSjk4aVFEQWc0QWlBQUlSbFY5d2VDa2FrYjFvNkdBRUJDaUI2cUZTdFdLeXhxMTAzQ0dFQzVRQ2xVcW9tTmZvaXhyQUp0czFDVHFBb0tBWVlIUTNFM2xBZkJnS2dBZUNkNHhFQVFWOUZRb0ZBVXdWQWdFSmtZZVVsbzJmb0tHaW8yTVJBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSOGNNbEpxNzA0NjgyNy8yQW9qbVJwZWdseElFWmxJQWVSV09uYWlqVjc3cHdBL0FCRUJRRThDQ2crb0RDVS9DMTVVRXZnQUtBZUtzQmZnQkxJWGtQZFluUk1LV1FKRlVLMVdpaGJBZWlRMlJvbmp4V3E2b3lTQUJJVUZIaFdleUFHZVFDRWRsRUtCUUZIRmdJQkNZQVZqSTRrbG8rS201eWRucCtLRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVmSERKU2F1OU9Pdk51LzlnS0k1a2FYb0djaENKbFJBSFlsVHAycDdhZStBbkF2d0hBVVh3K3lFcVBxQ1FaeUgrbUtWREVSQ2dCS1k3eXBRS3JWeWZYUkdoZUNoUUNsSXBvVEpPbThNU05DQUwveVRtQUlLQ1lvRE5ieE4zUDNwMUN3cCtoU0FDQVFWN0ZRb0ZBVXNWaXdtT2haQlZpWnVjblo2ZkZoRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkd0d3lVbXJ2VGpyemJ2L1lDaU9aR2wrQ1hFZ1JtVWdCNUZZNmRxZWVLNEpRQThnRllUdklLRHdmRUNkY3JrSUhBRFBROFhYQzFBQ1ZDbHpleXBRQ1JVQ0ZGcWdGS0lBTUhjOVVxaWdNMHJDUjFCUTNORTRlLzlSRkFKRkZnSUJDWFlWZm9COGlvdU1qWTVyRVFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVhM0RKU2F1OU9Pdk51LzlnS0k1a2FYNEdjaENKbFJBSFltaHZQSjk0YmlGQWZ3Z1VRYStIeUFpSFJaMHlkeGdDQXBTQTg1Q1JEcW5MYklsd0xWQUt6U1loVXdDRXg5cDBLR0VHRUJRVUE4emN3c2liZ0xwNjN4RUVDbkFWQ2dVQlFCcURoWHlLaTR5Tmpuc1JBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFScGNNbEpxNzA0NjgyNy8yQW9qbVJwZ2dseElFWmxJQWVSa09uYW5uZ3BBRHlBVklqZVFTRGE5WDY1WkNod0FEUVBsUjR2SUFwSW9jcHNweUFsVkFoT1owRlVlQUs4Mm5SR29YTE9LSWtlUVNGaVA5L3FmRVZSQ0JBdEFnRUpkQ044Zm5xSWlZcUxqRm9SQUNINUJBZ0pBQUFBTEFBQUFBQnVBQW9BZzdTeXROemEzUFR5OU1UQ3hMeSt2T1RpNVB6Ni9MUzJ0TXpPek9UbTVQeisvUC8vL3dBQUFBQUFBQUFBQUFBQUFBUnJjTWxKcTcwNDY4MjcvMkFvam1ScGdnWnlFSW1WRUFkaW5Oc2J6M1JlSVVCL0NCUkJyNGZRWFlURG90RjRHQUlDbElEenNLeEloOVJxam9BdFVBck5Ka0U3S1FEQ1kvSXBjUVlRRkJRRDdOeFN5NXVBdXRva0NCVGdGUW9GQVVCN0M0S0Vob3FMakkyT0dCRUFJZmtFQ0FrQUFBQXNBQUFBQUc0QUNnQ0R0TEswM05yYzlQTDB4TUxFdkw2ODVPTGsvUHI4dExhMHpNN001T2JrL1A3OC8vLy9BQUFBQUFBQUFBQUFBQUFBQkZWd3lVbXJ2VGpyemJ2L1lDaU9aR21HQ1hFZ1JtVWdCNUdjZEcwS1FBNGdGYUlmQXB0d3lBa2NBTWREUlpjTEVKL1FTWUZKcUJDUXlFSjBPMVNva0ROS1FrZFFjTTgxUlNFUXRBZ0NDVE42VHEvYjc5c0lBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFSUWNNbEpxNzA0NjgyNy8yQW9qbVJwaGdaeUVJbVdydTBwenlFQzNJZVEyYmhPLzhETDRYWUxaSVpFWTNBWkpCQVBoWXdURjJWYVp3bkFrS0RJRkpEY3EvZ2tDQlM2bW5JQ1BXNjczL0Q0TlFJQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRk53eVVtcnZUanJ6YnYvWUNpT1pHbUtDWEVneG1nZ0I1R2NkSTBKUUE0Z0k2SWZBcHZRRmpnQWpJZVJMaGNZT2syRkpXRkVPQjRMejZ4SW9Uck9VRHFDUWt2K0tBcUJJRWtRU0l6TDhMaDhUbjlHQUFBaCtRUUlDUUFBQUN3QUFBQUFiZ0FLQUlPMHNyVGMydHowOHZURXdzUzh2cnprNHVUOCt2eTB0clRNenN6azV1VDgvdnovLy84QUFBQUFBQUFBQUFBQUFBQUVVSERKU2F1OU9Pdk51LzlnS0k1a2FZb0djaERKdWFWcjY4NGdBdHlIUUY4MnJ1L0F6T0YyQ3dRcFE2THh5SndRaUlkQ2MvSEVTYWZNQkdCSVVFd0x5UzYyS1FnVXZOaHlBajF1dTkvd09DWUNBQ0g1QkFnSkFBQUFMQUFBQUFCdUFBb0FnN1N5dE56YTNQVHk5TVRDeEx5K3ZPVGk1UHo2L0xTMnRNek96T1RtNVB6Ky9QLy8vd0FBQUFBQUFBQUFBQUFBQUFRK2NNbEpxNzA0NjgyNy8yQW9qbVJwamdseElNYnB2ckFsQURTQXhIaE9CZ2ZRSDdxZ2NGT29BUWpEcEZLaVVQa1N5NmhRVVFnSXBOaXNkc3NOUmdBQUlma0VDQWtBQUFBc0FBQUFBRzRBQ2dDRHRMSzAzTnJjOVBMMHhNTEV2TDY4NU9May9Qcjh0TGEwek03TTVPYmsvUDc4Ly8vL0FBQUFBQUFBQUFBQUFBQUFCRDV3eVVtcnZUanJ6YnYvWUNpT1pHbWVTMEljaUlHK2NDd0pRQTBnY3E2SHdRSDRoNTF3aUNuWUFBU2lVcWxZL1JMTHFGQlJDQWlrMkt4Mnk0VkZBQUFoK1FRSUNRQUFBQ3dBQUFBQWJnQUtBSU8wc3JUYzJ0ejA4dlRFd3NTOHZyems0dVQ4K3Z5MHRyVE16c3prNXVUOC92ei8vLzhBQUFBQUFBQUFBQUFBQUFBRVBuREpTYXU5T092TnUvOWdLSTVrYVo1YlFoeUlnYjV3TEFsQURTQnlyb2ZCQWZpSG5YQ0lLZGdBQktKU3FWajlFc3VvVUZFSUNLVFlySGJMQlVVQUFDSDVCQWdKQUFBQUxBQUFBQUJ1QUFvQWc3U3l0TnphM1BUeTlNVEN4THkrdk9UaTVQejYvTFMydE16T3pPVG01UHorL1AvLy93QUFBQUFBQUFBQUFBQUFBQVErY01sSnE3MDQ2ODI3LzJBb2ptUnBucWlVRUFkaXBIQU1DMEFOSUhLdWg4RUIrSWVkY0lncDJBQUVvbEtwWVAwU3k2aFFVUWdJcE5pc2RzdGRSQUFBSWZrRUNBa0FBQUFzQUFBQUFHNEFDZ0NEdExLMDNOcmM5UEwweE1MRXZMNjg1T0xrL1ByOHRMYTB6TTdNNU9iay9QNzgvLy8vQUFBQUFBQUFBQUFBQUFBQUJEMXd5VW1ydlRqcnpidi9ZQ2lPWkdtZXFKa1FCMktrY0F3TFFBMGdjcTZId1FINGg1MXdpQ25ZQUFTaVVxbGcvUkxMcUZCUkNBaWsyS3gyaTRvQUFEcz1cIixcbiAgICAgICAgICAgIGFkdmFuY2VkX2xvYWQ6IGZhbHNlLFxuICAgICAgICAgICAgd2ViUF9sb2FkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzX3NjYWxlOiBmYWxzZSxcbiAgICAgICAgICAgIHNjYWxlX3dpZHRoOiA3NTBcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiB1cGRhdGUoKSB7XG4gICAgICAgICAgICB2YXIgY291bnRlciA9IDA7XG5cbiAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5za2lwX2ludmlzaWJsZSAmJiAhJHRoaXMuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkLmFib3ZldGhldG9wKHRoaXMsIHNldHRpbmdzKSB8fFxuICAgICAgICAgICAgICAgICAgICAkLmxlZnRvZmJlZ2luKHRoaXMsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgICAgICAvKiBOb3RoaW5nLiAqL1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoISQuYmVsb3d0aGVmb2xkKHRoaXMsIHNldHRpbmdzKSAmJlxuICAgICAgICAgICAgICAgICAgICAhJC5yaWdodG9mZm9sZCh0aGlzLCBzZXR0aW5ncykpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgLyogaWYgd2UgZm91bmQgYW4gaW1hZ2Ugd2UnbGwgbG9hZCwgcmVzZXQgdGhlIGNvdW50ZXIgKi9cbiAgICAgICAgICAgICAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCsrY291bnRlciA+IHNldHRpbmdzLmZhaWx1cmVfbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGEgY291cGxlIG9mIHZlcnNpb25zLiAqL1xuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5mYWlsdXJlbGltaXQpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmZhaWx1cmVfbGltaXQgPSBvcHRpb25zLmZhaWx1cmVsaW1pdDtcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5mYWlsdXJlbGltaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmVmZmVjdHNwZWVkKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5lZmZlY3Rfc3BlZWQgPSBvcHRpb25zLmVmZmVjdHNwZWVkO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvcHRpb25zLmVmZmVjdHNwZWVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkLmV4dGVuZChzZXR0aW5ncywgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDYWNoZSBjb250YWluZXIgYXMgalF1ZXJ5IGFzIG9iamVjdC4gKi9cbiAgICAgICAgJGNvbnRhaW5lciA9IChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpID8gJHdpbmRvdyA6ICQoc2V0dGluZ3MuY29udGFpbmVyKTtcblxuICAgICAgICAvKiBGaXJlIG9uZSBzY3JvbGwgZXZlbnQgcGVyIHNjcm9sbC4gTm90IG9uZSBzY3JvbGwgZXZlbnQgcGVyIGltYWdlLiAqL1xuICAgICAgICBpZiAoMCA9PT0gc2V0dGluZ3MuZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSkge1xuICAgICAgICAgICAgJGNvbnRhaW5lci5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQoc2VsZik7XG5cbiAgICAgICAgICAgIHNlbGYubG9hZGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8qIElmIG5vIHNyYyBhdHRyaWJ1dGUgZ2l2ZW4gdXNlIGRhdGE6dXJpLiAqL1xuICAgICAgICAgICAgaWYgKCRzZWxmLmF0dHIoXCJzcmNcIikgPT09IHVuZGVmaW5lZCB8fCAkc2VsZi5hdHRyKFwic3JjXCIpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZi5pcyhcImltZ1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIHNldHRpbmdzLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogV2hlbiBhcHBlYXIgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UuICovXG5cbiAgICAgICAgICAgICRzZWxmLm9uZShcImFwcGVhclwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5hcHBlYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYXBwZWFyLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkVXJsID0gJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCflm77niYflnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ3VwYWl5dW4nKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdDRE7lnLDlnYAnICt1cGRhdGVkVXJsLmluZGV4T2YoJ2ZpbGUuaXMyNi5jb20nKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkVXJsLmluZGV4T2YoJ3VwYWl5dW4nKSA+IC0xIHx8IHVwZGF0ZWRVcmwuaW5kZXhPZignZmlsZS5pczI2LmNvbScpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KDEpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuYWR2YW5jZWRfbG9hZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFVybCArPSAnISc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuaXNfc2NhbGUgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRVcmwgKz0gJy9mdy8nICsgc2V0dGluZ3Muc2NhbGVfd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mud2ViUF9sb2FkID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVXJsICs9ICcvZm9ybWF0L3dlYnAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCI8aW1nIC8+XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYmluZChcImxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCB1cGRhdGVkVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKCdcIiArIHVwZGF0ZWRVcmwgKyBcIicpXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZltzZXR0aW5ncy5lZmZlY3RdKHNldHRpbmdzLmVmZmVjdF9zcGVlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBSZW1vdmUgaW1hZ2UgZnJvbSBhcnJheSBzbyBpdCBpcyBub3QgbG9vcGVkIG5leHQgdGltZS4gKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9ICQuZ3JlcChlbGVtZW50cywgZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQubG9hZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gJCh0ZW1wKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50c19sZWZ0ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgdXBkYXRlZFVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8qIFdoZW4gd2FudGVkIGV2ZW50IGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlICovXG4gICAgICAgICAgICAvKiBieSB0cmlnZ2VyaW5nIGFwcGVhci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcbiAgICAgICAgICAgICAgICAkc2VsZi5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLmxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKiBDaGVjayBpZiBzb21ldGhpbmcgYXBwZWFycyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLiAqL1xuICAgICAgICAkd2luZG93LmJpbmQoXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB1cGRhdGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogV2l0aCBJT1M1IGZvcmNlIGxvYWRpbmcgaW1hZ2VzIHdoZW4gbmF2aWdhdGluZyB3aXRoIGJhY2sgYnV0dG9uLiAqL1xuICAgICAgICAvKiBOb24gb3B0aW1hbCB3b3JrYXJvdW5kLiAqL1xuICAgICAgICBpZiAoKC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbikpIHtcbiAgICAgICAgICAgICR3aW5kb3cuYmluZChcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykudHJpZ2dlcihcImFwcGVhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBGb3JjZSBpbml0aWFsIGNoZWNrIGlmIGltYWdlcyBzaG91bGQgYXBwZWFyLiAqL1xuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHVwZGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyogQ29udmVuaWVuY2UgbWV0aG9kcyBpbiBqUXVlcnkgbmFtZXNwYWNlLiAgICAgICAgICAgKi9cbiAgICAvKiBVc2UgYXMgICQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHt0aHJlc2hvbGQgOiAxMDAsIGNvbnRhaW5lciA6IHdpbmRvd30pICovXG5cbiAgICAkLmJlbG93dGhlZm9sZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICh3aW5kb3cuaW5uZXJIZWlnaHQgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiAkd2luZG93LmhlaWdodCgpKSArICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcCArICQoc2V0dGluZ3MuY29udGFpbmVyKS5oZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wIC0gc2V0dGluZ3MudGhyZXNob2xkO1xuICAgIH07XG5cbiAgICAkLnJpZ2h0b2Zmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcbiAgICAgICAgdmFyIGZvbGQ7XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy53aWR0aCgpICsgJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLmxlZnQgKyAkKHNldHRpbmdzLmNvbnRhaW5lcikud2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkIDw9ICQoZWxlbWVudCkub2Zmc2V0KCkubGVmdCAtIHNldHRpbmdzLnRocmVzaG9sZDtcbiAgICB9O1xuXG4gICAgJC5hYm92ZXRoZXRvcCA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2xkID0gJChzZXR0aW5ncy5jb250YWluZXIpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmb2xkID49ICQoZWxlbWVudCkub2Zmc2V0KCkudG9wICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS5oZWlnaHQoKTtcbiAgICB9O1xuXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XG4gICAgICAgIHZhciBmb2xkO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xuICAgIH07XG5cbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xuXG4gICAgICAgIHJldHVybiAhJC5yaWdodG9mZm9sZChlbGVtZW50LCBzZXR0aW5ncykgJiYgISQubGVmdG9mYmVnaW4oZWxlbWVudCwgc2V0dGluZ3MpICYmXG4gICAgICAgICAgICAhJC5iZWxvd3RoZWZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmFib3ZldGhldG9wKGVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9O1xuXG4gICAgLyogQ3VzdG9tIHNlbGVjdG9ycyBmb3IgeW91ciBjb252ZW5pZW5jZS4gICAqL1xuICAgIC8qIFVzZSBhcyAkKFwiaW1nOmJlbG93LXRoZS1mb2xkXCIpLnNvbWV0aGluZygpIG9yICovXG4gICAgLyogJChcImltZ1wiKS5maWx0ZXIoXCI6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgd2hpY2ggaXMgZmFzdGVyICovXG5cbiAgICAkLmV4dGVuZCgkLmV4cHJbXCI6XCJdLCB7XG4gICAgICAgIFwiYmVsb3ctdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImFib3ZlLXRoZS10b3BcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFwibGVmdC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImluLXZpZXdwb3J0XCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmludmlld3BvcnQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qIE1haW50YWluIEJDIGZvciBjb3VwbGUgb2YgdmVyc2lvbnMuICovXG4gICAgICAgIFwiYWJvdmUtdGhlLWZvbGRcIjogZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgcmV0dXJuICEkLmJlbG93dGhlZm9sZChhLCB7XG4gICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJyaWdodC1vZi1mb2xkXCI6IGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHtcbiAgICAgICAgICAgICAgICB0aHJlc2hvbGQ6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBcImxlZnQtb2YtZm9sZFwiOiBmdW5jdGlvbihhKSB7XG4gICAgICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge1xuICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIEdlbmVyYWwuaW5pdCgpO1xuICAgIEltYWdlU21hcnRMb2FkZXIuaW5pdCgpO1xuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3Bvc3QtdGVtcGxhdGUnKSkge1xuICAgICAgICBHZW5lcmFsLmFkZEljb25zKCk7XG4gICAgICAgIEdlbmVyYWwuY29tbWVudExvYWRlcigpO1xuXG4gICAgfVxuXG59KSJdfQ==
